<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ESM 组件测试</title><link rel="stylesheet" href="https://unpkg.com/antd@5/dist/reset.css"><style>body {
      margin: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    .component-selector {
      margin-bottom: 20px;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 4px;
    }
    .component-selector select {
      padding: 8px 12px;
      font-size: 14px;
      border: 1px solid #d9d9d9;
      border-radius: 4px;
      margin-right: 10px;
    }
    .component-selector button {
      padding: 8px 16px;
      background: #1890ff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    #root {
      max-width: 600px;
      margin: 0 auto;
    }</style></head><body><div class="component-selector"><label>选择组件：</label> <select id="componentSelect"><option value="UserProfileForm">UserProfileForm</option></select> <button onclick="loadComponent()">加载组件</button> <button onclick="switchToUMD()">切换到 UMD 模式</button></div><div id="root"></div><script type="module">import React from 'https://esm.sh/react@18';
    import ReactDOM from 'https://esm.sh/react-dom@18/client';
    import { createRoot } from 'https://esm.sh/react-dom@18/client';

    // 组件配置
    const COMPONENTS = {
      UserProfileForm: {
        esmPath: '/dist/UserProfileForm.esm.js',
      }
    };

    // 从 URL 参数获取组件名
    function getComponentName() {
      const params = new URLSearchParams(window.location.search);
      return params.get('component') || 'UserProfileForm';
    }

    // 加载组件
    window.loadComponent = async function() {
      const componentName = document.getElementById('componentSelect').value;
      const componentConfig = COMPONENTS[componentName];
      
      if (!componentConfig) {
        console.error('组件不存在:', componentName);
        return;
      }

      try {
        // 动态导入 ESM 模块
        const module = await import(componentConfig.esmPath);
        const Component = module.default;
        
        // 渲染组件
        const root = document.getElementById('root');
        root.innerHTML = '';
        
        const reactRoot = createRoot(root);
        reactRoot.render(
          React.createElement(Component, {
            onSubmit: (values) => {
              console.log('表单提交:', values);
              alert('表单数据: ' + JSON.stringify(values, null, 2));
            },
            locale: 'zh'
          })
        );

        // 更新 URL
        window.history.pushState({}, '', `?component=${componentName}`);
      } catch (error) {
        console.error('组件加载失败:', error);
      }
    };

    // 切换到 UMD 模式
    window.switchToUMD = function() {
      window.location.href = '/umd.html' + window.location.search;
    };

    // 初始化
    window.addEventListener('DOMContentLoaded', () => {
      const componentName = getComponentName();
      document.getElementById('componentSelect').value = componentName;
      loadComponent();
    });

    // 监听选择器变化
    document.getElementById('componentSelect').addEventListener('change', loadComponent);</script></body></html>